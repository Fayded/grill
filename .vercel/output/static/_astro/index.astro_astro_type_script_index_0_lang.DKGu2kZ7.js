function I(t){const e=U(t),a=new ArrayBuffer(e.length),r=new DataView(a);for(let s=0;s<a.byteLength;s++)r.setUint8(s,e.charCodeAt(s));return a}const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function U(t){t.length%4===0&&(t=t.replace(/==?$/,""));let e="",a=0,r=0;for(let s=0;s<t.length;s++)a<<=6,a|=D.indexOf(t[s]),r+=6,r===24&&(e+=String.fromCharCode((a&16711680)>>16),e+=String.fromCharCode((a&65280)>>8),e+=String.fromCharCode(a&255),a=r=0);return r===12?(a>>=4,e+=String.fromCharCode(a)):r===18&&(a>>=2,e+=String.fromCharCode((a&65280)>>8),e+=String.fromCharCode(a&255)),e}const C=-1,w=-2,m=-3,L=-4,b=-5,P=-6;function F(t,e){return B(JSON.parse(t),e)}function B(t,e){if(typeof t=="number")return s(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const a=t,r=Array(a.length);function s(n,u=!1){if(n===C)return;if(n===m)return NaN;if(n===L)return 1/0;if(n===b)return-1/0;if(n===P)return-0;if(u)throw new Error("Invalid input");if(n in r)return r[n];const o=a[n];if(!o||typeof o!="object")r[n]=o;else if(Array.isArray(o))if(typeof o[0]=="string"){const i=o[0],E=e?.[i];if(E)return r[n]=E(s(o[1]));switch(i){case"Date":r[n]=new Date(o[1]);break;case"Set":const A=new Set;r[n]=A;for(let c=1;c<o.length;c+=1)A.add(s(o[c]));break;case"Map":const l=new Map;r[n]=l;for(let c=1;c<o.length;c+=2)l.set(s(o[c]),s(o[c+1]));break;case"RegExp":r[n]=new RegExp(o[1],o[2]);break;case"Object":r[n]=Object(o[1]);break;case"BigInt":r[n]=BigInt(o[1]);break;case"null":const N=Object.create(null);r[n]=N;for(let c=1;c<o.length;c+=2)N[o[c]]=s(o[c+1]);break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const c=globalThis[i],T=o[1],p=I(T),d=new c(p);r[n]=d;break}case"ArrayBuffer":{const c=o[1],T=I(c);r[n]=T;break}default:throw new Error(`Unknown type ${i}`)}}else{const i=new Array(o.length);r[n]=i;for(let E=0;E<o.length;E+=1){const A=o[E];A!==w&&(i[E]=s(A))}}else{const i={};r[n]=i;for(const E in o){const A=o[E];i[E]=s(A)}}return r[n]}return s(0)}function k(t){return t.endsWith("/")?t:t+"/"}const _={actionName:"_action"},M=_,Q=k,S={BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,CONTENT_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,MISDIRECTED_REQUEST:421,UNPROCESSABLE_CONTENT:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NETWORK_AUTHENTICATION_REQUIRED:511},v=Object.entries(S).reduce((t,[e,a])=>({...t,[a]:e}),{});class f extends Error{type="AstroActionError";code="INTERNAL_SERVER_ERROR";status=500;constructor(e){super(e.message),this.code=e.code,this.status=f.codeToStatus(e.code),e.stack&&(this.stack=e.stack)}static codeToStatus(e){return S[e]}static statusToCode(e){return v[e]??"INTERNAL_SERVER_ERROR"}static fromJson(e){return V(e)?new Y(e.issues):G(e)?new f(e):new f({code:"INTERNAL_SERVER_ERROR"})}}function G(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="AstroActionError"}function V(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="AstroActionInputError"&&"issues"in t&&Array.isArray(t.issues)}class Y extends f{type="AstroActionInputError";issues;fields;constructor(e){super({message:`Failed to validate: ${JSON.stringify(e,null,2)}`,code:"BAD_REQUEST"}),this.issues=e,this.fields={};for(const a of e)if(a.path.length>0){const r=a.path[0].toString();this.fields[r]??=[],this.fields[r]?.push(a.message)}}}function h(t){return`?${new URLSearchParams({[_.actionName]:t}).toString()}`}function O(t){if(t.type==="error"){let e;try{e=JSON.parse(t.body)}catch{return{data:void 0,error:new f({message:t.body,code:"INTERNAL_SERVER_ERROR"})}}return{error:f.fromJson(e),data:void 0}}return t.type==="empty"?{data:void 0,error:void 0}:{data:F(t.body,{URL:e=>new URL(e)}),error:void 0}}const $="%2E";function g(t={},e=""){return new Proxy(t,{get(a,r){if(r in a||typeof r=="symbol")return a[r];const s=e+encodeURIComponent(r.toString()).replaceAll(".",$);function n(u){return y(u,s)}return Object.assign(n,{queryString:h(s),toString:()=>n.queryString,$$FORM_ACTION:function(){return{method:"POST",name:"_astroAction",action:"?"+new URLSearchParams(n.toString()).toString()}},async orThrow(u){const{data:o,error:i}=await y(u,s);if(i)throw i;return o}}),g(n,s+".")}})}function j(t){let e=`${"/".replace(/\/$/,"")}/_actions/${new URLSearchParams(t.toString()).get(M.actionName)}`;return e=Q(e),e}async function y(t,e,a){const r=new Headers;r.set("Accept","application/json");let s=t;if(!(s instanceof FormData)){try{s=JSON.stringify(t)}catch(u){throw new f({code:"BAD_REQUEST",message:`Failed to serialize request body to JSON. Full error: ${u.message}`})}s?r.set("Content-Type","application/json"):r.set("Content-Length","0")}const n=await fetch(j({toString(){return h(e)}}),{method:"POST",body:s,headers:r});return n.status===204?O({type:"empty",status:204}):O({type:n.ok?"data":"error",body:await n.text()})}const H=g(),R=document.getElementById("email-form");R&&R.addEventListener("submit",async t=>{t.preventDefault();const e=new FormData(R);await H.newsletter(e),R.reset(),alert("Thank you for subscribing!")});
